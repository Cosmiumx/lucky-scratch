<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Lucky-canva-react Demo</title>
    <script
      crossorigin
      src="https://cdn.staticfile.org/react/16.8.0/umd/react.development.js"
    ></script>
    <script
      crossorigin
      src="https://cdn.staticfile.org/react-dom/16.8.0/umd/react-dom.development.js"
    ></script>
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
  </head>

  <body>
    <noscript> You need to enable JavaScript to run this app. </noscript>
    <div id="root"></div>
    <script src="../dist/index.umd.js"></script>
    <script type="text/babel">
      class App extends React.Component {
        constructor(props) {
          super(props)
          this.myLucky = React.createRef()
          this.myScratch = React.createRef()
        }
        onSuccess() {
          console.log('success')
        }
        onStart() {
          this.myLucky.current.play()
          setTimeout(() => {
            const index = (Math.random() * 6) >> 0
            this.myLucky.current.stop(index)
          }, 2500)
          console.log('start')
        }
        onEnd() {
          console.log('end')
        }
        onScratchSuccess(progress) {
          console.log('åˆ®å¥–å®Œæˆï¼Œå½“å‰è¿›åº¦:', progress)
          alert('ğŸ‰ æ­å–œä¸­å¥– iPhone 15 Pro Maxï¼')
        }
        resetScratch() {
          if (this.myScratch.current) {
            this.myScratch.current.init()
          }
        }
        render() {
          const buttons = [
            { radius: '40%', background: '#617df2' },
            { radius: '35%', background: '#afc8ff' },
            {
              radius: '30%',
              background: '#869cfa',
              pointer: true,
              fonts: [{ text: 'å¼€å§‹', top: '-10px' }],
            },
          ]
          const prizes = [
            { background: '#e9e8fe', fonts: [{ text: '0' }] },
            { background: '#b8c5f2', fonts: [{ text: '1' }] },
            { background: '#e9e8fe', fonts: [{ text: '2' }] },
            { background: '#b8c5f2', fonts: [{ text: '3' }] },
            { background: '#e9e8fe', fonts: [{ text: '4' }] },
            { background: '#b8c5f2', fonts: [{ text: '5' }] },
          ]
          const mask = {
            type: 'color',
            color: '#ccc',
          }
          const scratch = {
            radius: 20,
            percent: 0.5,
          }
          return (
            <div style={{ padding: '20px', textAlign: 'center' }}>
              <h2>å¤§è½¬ç›˜ç¤ºä¾‹</h2>
              <ReactLuckyCanvas.LuckyWheel
                ref={this.myLucky}
                width="300px"
                height="300px"
                prizes={prizes}
                buttons={buttons}
                onSuccess={this.onSuccess}
                onStart={this.onStart}
                onEnd={this.onEnd}
              />
              <div style={{ marginTop: '40px' }}>
                <h2>åˆ®åˆ®å¡ç¤ºä¾‹</h2>
                <div style={{ position: 'relative', width: '300px', height: '150px', margin: '20px auto', border: '1px solid #ddd', borderRadius: '8px', overflow: 'hidden' }}>
                  <div style={{ position: 'absolute', top: 0, left: 0, width: '100%', height: '100%', zIndex: 0, display: 'flex', flexDirection: 'column', justifyContent: 'center', alignItems: 'center', background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)', color: 'white', fontSize: '24px', fontWeight: 'bold' }}>
                    ğŸ‰ æ­å–œä¸­å¥– ğŸ‰
                    <small style={{ fontSize: '16px', marginTop: '10px', opacity: 0.9 }}>iPhone 15 Pro Max</small>
                  </div>
                  <ReactLuckyCanvas.LuckyScratch
                    ref={this.myScratch}
                    width="300px"
                    height="150px"
                    mask={mask}
                    scratch={scratch}
                    onSuccess={this.onScratchSuccess}
                    onStart={() => console.log('å¼€å§‹åˆ®å¥–')}
                    onEnd={() => console.log('åœæ­¢åˆ®å¥–')}
                  />
                </div>
                <button onClick={() => this.resetScratch()} style={{ padding: '10px 24px', fontSize: '16px', cursor: 'pointer', background: '#667eea', color: 'white', border: 'none', borderRadius: '6px', marginTop: '10px' }}>
                  ğŸ”„ é‡æ–°åˆ®å¥–
                </button>
              </div>
            </div>
          )
        }
      }
      ReactDOM.render(
        <React.StrictMode>
          <App />
        </React.StrictMode>,
        document.getElementById('root')
      )
    </script>
  </body>
</html>
